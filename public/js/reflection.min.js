/*!
	reflection.js for jQuery v1.11
	(c) 2006-2013 Christophe Beyls <http://www.digitalia.be>
	MIT-style license.
*/

!function(a){a.fn.extend({reflect:function(b){return b=a.extend({height:1/3,opacity:.5},b),this.unreflect().each(function(){function d(){var f,g,h,i,j,d=c.width,e=c.height;g=Math.floor(b.height>1?Math.min(e,b.height):e*b.height);var k=20;if(f=a("<canvas />")[0],f.getContext){i=f.getContext("2d");try{a(f).attr({width:d,height:g}),i.save(),i.translate(0,e-1),i.scale(1,-1),i.drawImage(c,0,0,d,e),i.restore(),i.globalCompositeOperation="destination-out",j=i.createLinearGradient(0,0,0,g),j.addColorStop(0,"rgba(255, 255, 255, "+(1-b.opacity)+")"),j.addColorStop(1,"rgba(255, 255, 255, 1.0)"),i.fillStyle=j,i.rect(0,0,d,g),i.fill()}catch(a){return}}else{if(!window.ActiveXObject)return;f=a("<img />").attr("src",c.src).css({width:d,height:e,marginBottom:g-e,filter:"FlipV progid:DXImageTransform.Microsoft.Alpha(Opacity="+100*b.opacity+", FinishOpacity=0, Style=1, StartX=0, StartY=0, FinishX=0, FinishY="+g/e*100+")"})[0]}a(f).css({display:"block",border:0,"border-radius":"5px","margin-top":k+"px"}),h=a(/^a$/i.test(c.parentNode.tagName)?"<span />":"<div />").insertAfter(c).append([c,f])[0],h.className=c.className,a.data(c,"reflected",h.style.cssText=c.style.cssText),a(h).css({width:d,height:e+g+k}),c.style.cssText="display: block; border: 0px;",c.className="reflected"}var c=this;/^img$/i.test(c.tagName)&&(c.complete?d():a(c).load(d))})},unreflect:function(){return this.unbind("load").each(function(){var d,b=this,c=a.data(this,"reflected");void 0!==c&&(d=b.parentNode,b.className=d.className,b.style.cssText=c,a.removeData(b,"reflected"),d.parentNode.replaceChild(b,d))})}})}(jQuery);